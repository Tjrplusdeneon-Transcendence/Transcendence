{% load static %}
{% if user.is_authenticated %}
<div class="chat-container" id="chatContainer">
    <h2>Tchat</h2>
    <div class="chat-box" id="chatBox">
        <ul class="message-list" id="messageList">
            {% for message in chat_messages reversed %}
                {% if message.author.id == request.user.id %}
                    <li class="flex justify-end mb-4">
                        <div class="bg-green-200 rounded-l-lg rounded-tr-lg p-4 max-w-[75%]">
                            <span>{{ message.content }}</span>
                        </div>
                        <div class="flex items-end">
                            <svg height="13" width="8" >
                                <path fill="#bbf7d0" d="M6.3,10.4C1.5,8.7,0.9,5.5,0,0.2L0,13l5.2,0C7,13,9.6,11.5,6.3,10.4z"/>
                            </svg>
                        </div>
                    </li>
                {% else %}
                    <li>
                        <div class="flex justify-start">
                            <div class="flex items-end" >
                                <svg height="13" width="8" >
                                    <path fill="white" d="M2.8,13L8,13L8,0.2C7.1,5.5,6.5,8.7,1.7,10.4C-1.6,11.5,1,13,2.8,13z"></path>
                                </svg>
                            </div>
                            <div class="bg-white p-4 max-w-[75%] rounded-r-lg rounded-tl-lg">
                                <span>{{ message.author }}: {{ message.content }}</span>
                            </div>  
                        </div>
                    </li>
                {% endif %}
            {% endfor %}
        </ul>
    </div>    
    <div class="chat-input">
        <input id="chat-message-input" type="text" placeholder="Type your message..." style="width: 70%;"><br>
        <button id="chat-message-submit" name="chatBtn">➤</button>
    </div>
</div>

<script src="{% static 'pong/scripts/chat.js' %}"></script>
{% endif %}