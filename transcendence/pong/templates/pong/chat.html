{% if user.is_authenticated %}
<div class="chat-container" id="chatContainer">
    <h2>Tchat</h2>
    <div class="chat-box" id="chatBox">
        <ul class="message-list" id="messageList">
            {% for message in chat_messages reversed %}
                {% if message.author.id == request.user.id %}
                    <li class="message user-message">
                        {{ message.content }}
                    </li>
                {% elif message.author not in user.banned_users.all %}
                    <li>
                        <div class="message-meta">
                            <span class="message-author">{{ message.author }}</span>
                            <button class="ban-button" author-id="{{ message.author.id }}" title="Ban user">🚫</button>
                            <button class="invite-button" user-id="{{ user.id }}" author-id="{{ message.author.id }}" title="Invite user">🕹️</button>
                            <button class="info-button" user-id="{{ user.id }}" author-id="{{ message.author.id }}" title="User info">🔎</button>
                        </div>
                        <span class="message other-message">{{ message.content|safe }}</span>
                    </li>
                    {% endif %}
            {% endfor %}
        </ul>
    </div>    
    <div class="chat-input">
        <input id="chat-message-input" type="text" placeholder="Type your message..." style="width: 70%;" maxlength="50"><br>
        <button id="chat-message-submit" name="chatBtn">➤</button>
    </div>
</div>
{% endif %}
